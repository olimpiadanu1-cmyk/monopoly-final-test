#!/bin/bash

echo "========================================"
echo "   Monopoly Game - –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤"
echo "========================================"
echo

echo "[1/2] –ó–∞–ø—É—Å–∫ API —Å–µ—Ä–≤–µ—Ä–∞..."
python3 api_server.py &
API_PID=$!

sleep 2

echo "[2/2] –ó–∞–ø—É—Å–∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞..."
python3 -m http.server 3000 &
WEB_PID=$!

echo
echo "‚úÖ –°–µ—Ä–≤–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã!"
echo "üìñ –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:3000"
echo "üíæ –°–µ—Ä–≤–µ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: http://localhost:5000"
echo
echo "–ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤"

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤
cleanup() {
    echo
    echo "–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤..."
    kill $API_PID $WEB_PID 2>/dev/null
    echo "–°–µ—Ä–≤–µ—Ä—ã –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã."
    exit 0
}

# –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
trap cleanup SIGINT

# –û–∂–∏–¥–∞–Ω–∏–µ
wait

